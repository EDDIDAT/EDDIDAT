%% Choice of scattering angle TwoTheta
config.configParameter('TwoTheta',...
	'Value', 20,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);

config.configParameter('LowerChannelBound',...
	'Value', 600);

config.configParameter('UpperChannelBound',...
	'Value', 6300);

% psiTmp = [30;0;4;8;12;16;20;24;28;32;36;40;44;48;52;56;60;64;68;72;74;76;78;80;81;82;83;84;85;86;87;88;89];
% for i = 1:numberOfSpecs
% 	config.configParameter('Psi',...
% 		'Value', psiTmp(i),...
% 		'SpecIndex', i);
% end

config.configParameter('Psi',...
	'Value', 30,...
	'Refinable', false);

%% Input of photon energies of principal K-, L-shell emmision lines
config.configParameter('FluorPos_K',...
	'Value', zeros(0,1));
config.configParameter('FluorPos_L',...
	'Value', [9.713; 9.628; 11.442; 11.585; 13.382]);
config.configParameter('FluorInt_K',...
	'Value', zeros(0,1));
config.configParameter('FluorInt_L',...
	'Value', [1.1; 0.25; 0.89; 0.3; 0.16]);
% 	'Value', [1; 0.25; 0.95; 0.4; 0.17]);

%% Input of the h k l values and multiplicity m values
hklTmp = [1 1 1 8;...
    2 0 0 6;...
    2 2 0 12;...
    3 1 1 24;...
    2 2 2 8;...
    4 0 0 6;...
    3 3 1 24;...
    4 2 0 24;...
    4 2 2 24;...
    5 1 1 24];...
%     3 3 3 8;...
%     4 4 0 12;...
%     5 3 1 48;...
%     4 4 2 24;...
%     6 0 0 6;...
%     6 2 0 24;...
%     5 3 3 24;...
%     6 2 2 24;...
%     4 4 4 8;...
%     5 5 1 24;...
%     7 1 1 24;...
%     6 4 0 24;...
%     6 4 2 48];
config.configParameter('H',...
	'Value', hklTmp(:,1));
config.configParameter('K',...
	'Value', hklTmp(:,2));
config.configParameter('L',...
	'Value', hklTmp(:,3));
config.configParameter('Multiplicity',...
	'Value', hklTmp(:,4));
config.configParameter('Alpha',...
	'Value', 90);
config.configParameter('Beta',...
	'Value', 90);
config.configParameter('Gamma',...
	'Value', 90);

% Phi = 0
% ringCurrentTmp = 300;
% 
% for i = 1:numberOfSpecs
% 	config.configParameter('RingCurrent',...
% 		'Value', ringCurrentTmp(i),...
% 		'SpecIndex', i);
% end

config.configParameter('RingCurrent',...
	'Value', 300);

% Phi = 0
% deadTimeTmp = [47.63888889;47.95;46.91666667;44.97222222;42.36666667;39.10555556;...
% 	35.26111111;31.31666667;27.57222222;24.30555556;21.08333333;18.20555556;...
% 	15.38888889;12.9;10.63888889;8.4;6.333333333;4.561111111;3.005555556;...
% 	2.505555556;2.011111111;1.561111111;1.211111111;1.105555556;0.977777778;...
% 	0.827777778;0.7;0.611111111;0.505555556;0.461111111;0.438888889;0.444444444];

deadTimeTmp = [0.108333333;0.111666667;0.124583333;0.137916667;0.149583333;0.1475;0.145416667;0.152083333;0.164166667;0.174583333;0.175833333;0.169166667;0.162083333;0.154583333;0.147083333;0.1425;0.141666667;0.139166667;0.137083333;0.135;0.13375;0.13375;0.132916667;0.13375;0.134583333;0.135833333;0.137916667;0.14;0.140833333;0.140416667;0.140416667;0.142916667;0.14375;0.147083333;0.154583333;0.156666667;0.150833333;0.136666667;0.1225;0.11625;0.119166667;0.1125];

for i = 1:numberOfSpecs
	config.configParameter('DeadTime',...
		'Value', deadTimeTmp(i),...
		'SpecIndex', i);
end

%% Input of the DEK values
DEK_S_Tmp = [-4.202e-006  1.456e-005
			-6.849e-006  2.250e-005
			-4.864e-006  1.654e-005
			-5.602e-006  1.876e-005
			-4.202e-006  1.456e-005
			-6.849e-006  2.250e-005
			-4.671e-006  1.597e-005
			-5.579e-006  1.869e-005
			-4.864e-006  1.654e-005
			-5.602e-006  1.876e-005];
% 			-4.202e-006  1.456e-005
% 			-4.864e-006  1.654e-005
% 			-5.170e-006  1.746e-005
% 			-4.671e-006  1.597e-005
% 			-6.849e-006  2.250e-005];
% 			-6.135e-006  2.036e-005
% 			-4.568e-006  1.566e-005];
	
config.configParameter('DEK_S1',...
	'Value', DEK_S_Tmp(:,1));
config.configParameter('DEK_S2',...
	'Value', DEK_S_Tmp(:,2));

%% Input of the attenuation factors
config.configParameter('DensityAir',...
	'Value', 1.2041e-003);
load(fullfile(rvpath,'data','Physics','Air_Absorption.mat'));
config.configParameter('X_airabsorption',...
	'Value', X_airabsorption);
config.configParameter('Y_airabsorption',...
	'Value', Y_airabsorption_en);
config.configParameter('DetectorDistance',...
	'Value', 110);

%% material absorption correction
config.configParameter('Density',...
	'Value', 19.3);
load(fullfile(rvpath,'data','Physics','Au_absorption_FFAST'));
config.configParameter('X_abs',...
	'Value', X_abs);
config.configParameter('Y_abs',...
	'Value', Y_abs);

%% structure factor calculation
load(fullfile(rvpath,'data','Physics','AtomSF.mat'))
% Input of the atom form factor parameter
config.configParameter('SF_a',...
	'Value', Atomdata(170,[1 3 5 7]));
config.configParameter('SF_b',...
	'Value', Atomdata(170,[2 4 6 8]));
config.configParameter('SF_c',...
	'Value', Atomdata(170,9));
% Input of the atom coordinates
config.configParameter('APConst',...
	'Value', [0 0 0;...
			  0 1/2 1/2;...
			  1/2 0 1/2;...
			  1/2 1/2 0]);
% Input of the fit pattern to declare which atom coordinates are refinable 
% (0 = constant, 1 = refinable, -1 = negative of coordinate)
config.configParameter('APFitPattern',...
	'Value', [0 0 0;...
			  0 0 0;...
			  0 0 0;...
			  0 0 0]);
% Input of the start value of the refinable atom coordinate
config.configParameter('APFitParams',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', 1,...
	'Refinable', false);
% Input of the atom coordinate count, that describes how many atom 
% coordinates per atom exist
config.configParameter('AtomCoordCnts',...
	'Value', 4);
% Input of anomalous scattering factors
load(fullfile(rvpath,'data','Physics','anomalousScattering','Auf1.mat'))
load(fullfile(rvpath,'data','Physics','anomalousScattering','Auf2.mat'))
config.configParameter('Atom1f1',...
	'Value', Auf1);
config.configParameter('Atom1f2',...
	'Value', Auf2);
config.configParameter('Atom2f1',...
	'Value', 0);
config.configParameter('Atom2f2',...
	'Value', 0);
% Input of the Debye-Waller factor
config.configParameter('DebyeWaller',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);

%% FitParameter for the FWHM and the line position calibration
config.configParameter('FluorScaleFactor_K',...
	'Value', 1,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorScaleFactor_L',...
	'Value', 1,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorDeltaEnergy_K',...
	'Value', zeros(3,1),...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorDeltaEnergy_L',...
	'Value', zeros(3,1),...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorU_K',...
	'Value', 0.0025,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorW_K',...
	'Value', 0.0005,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorU_L',...
	'Value', 0.0025,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('FluorW_L',...
	'Value', 0.0005,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);

%% Escape peaks
% config.configParameter('EscapeInt_Alpha',...
% 	'Value', ones(4,1));
% config.configParameter('EscapeInt_Beta',...
% 	'Value', ones(4,1));
% config.configParameter('EscapeAlphaInd',...
% 	'Value', [1; 2; 3; 4]);
% config.configParameter('EscapeBetaInd',...
% 	'Value', [1; 2; 3; 4]);
% config.configParameter('EscapeScaleFactor_Alpha',...
% 	'Value', 1,...
% 	'LowerConstraint', 0,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
% config.configParameter('EscapeScaleFactor_Beta',...
% 	'Value', 1,...
% 	'LowerConstraint', 0,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
% config.configParameter('EscapeU_Alpha',...
% 	'Value', 0.0025,...
% 	'LowerConstraint', -Inf,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
% config.configParameter('EscapeU_Beta',...
% 	'Value', 0.0005,...
% 	'LowerConstraint', -Inf,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
% config.configParameter('EscapeW_Alpha',...
% 	'Value', 0.0025,...
% 	'LowerConstraint', -Inf,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
% config.configParameter('EscapeW_Beta',...
% 	'Value', 0.0005,...
% 	'LowerConstraint', -Inf,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);

%% Phase
config.configParameter('ScaleFactor',...
	'Value', 1,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', true);
config.configParameter('StructureFactor',...
	'Value', ones(10,1).*5000,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('DeltaEnergy_a',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('DeltaEnergy_b',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('DeltaEnergy_c',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);

config.configParameter('LatticeParam1',...
	'Value', 4.078,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('LatticeParam2',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('LatticeParam3',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
% config.configParameter('StressCoef',...
% 	'Value', [0; 0; 0],...
% 	'LowerConstraint', -Inf,...
% 	'UpperConstraint', +Inf,...
% 	'Refinable', false);
config.configParameter('sigmatau',...
	'Value', zeros(10,1),...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('StressCoef1',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('StressCoef2',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('StressCoef3',...
	'Value', 0,...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', false);
config.configParameter('P_Size',...
	'Value', 0.0276603932,...
	'LowerConstraint', 0.0276603932,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('U_Strain',...
	'Value', 0.0001241635,...
	'LowerConstraint', 0.0001241635,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('V_Detector',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('X_Size',...
	'Value', 0.0005,...
	'LowerConstraint', 0,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('Y_Strain',...
	'Value', 0.0024437191,...
	'LowerConstraint', 0.0024437191,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('Z_Detector',...
	'Value', 0,...
	'LowerConstraint', 0,...
	'UpperConstraint', 1,...
	'Refinable', false);
config.configParameter('Background',...
	'Value', zeros(5,1),...
	'LowerConstraint', -Inf,...
	'UpperConstraint', +Inf,...
	'Refinable', true);
config.configParameter('MaxAmp',...
	'Value', [30; 55],...
	'LowerConstraint', 0,...
	'UpperConstraint', Inf,...
	'Refinable', false);
config.configParameter('Center',...
	'Value', [14; 48],...
	'LowerConstraint', 0,...
	'UpperConstraint', Inf,...
	'Refinable', false);
config.configParameter('Width',...
	'Value', [8; 29],...
	'LowerConstraint', 0,...
	'UpperConstraint', Inf,...
	'Refinable', false);
config.configParameter('Shape1',...
	'Value', [3.2; 4.8],...
	'LowerConstraint', 0,...
	'UpperConstraint', Inf,...
	'Refinable', false);
config.configParameter('Shape2',...
	'Value', [3.3; 7.9],...
	'LowerConstraint', 0,...
	'UpperConstraint', Inf,...
	'Refinable', false);

% out = fitter.executeFit(rc);